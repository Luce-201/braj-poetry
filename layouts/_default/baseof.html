<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ if .Title }}{{ .Title }} — {{ end }}{{ .Site.Params.siteName }}</title>
  <meta name="description" content="{{ .Site.Params.description }}">
  
  <!-- Apply saved language BEFORE render to prevent flash -->
  <script>
    (function() {
      var lang = localStorage.getItem('braj_lang') || 'hi';
      document.documentElement.setAttribute('data-lang', lang);
    })();
  </script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Tiro+Devanagari+Hindi:ital@0;1&family=Lora:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/main.css">
</head>
<body>

<header class="site-header">
  <div class="header-inner">
    <a href="/" class="site-logo">
      <span class="logo-hi">{{ .Site.Params.siteName }}</span>
      <span class="logo-en">{{ .Site.Params.siteNameEn }}</span>
    </a>
    <nav class="main-nav">
      <a href="/poems/">
        <span class="lang-hi">कविताएँ</span>
        <span class="lang-en">Poems</span>
      </a>
      <a href="/poets/">
        <span class="lang-hi">कवि</span>
        <span class="lang-en">Poets</span>
      </a>
      <a href="/themes/">
        <span class="lang-hi">विषय</span>
        <span class="lang-en">Themes</span>
      </a>
      <button class="lang-toggle" id="lang-toggle" onclick="toggleLang()">English</button>
    </nav>
  </div>
</header>

<div id="word-tooltip" class="word-tooltip hidden">
  <span class="tooltip-word"></span>
  <span class="tooltip-meaning"></span>
  <button class="tooltip-close" onclick="closeTooltip()">✕</button>
</div>

<main class="main-content">
  {{ block "main" . }}{{ end }}
</main>

<footer class="site-footer">
  <span class="lang-hi">ब्रज काव्य कोश</span>
  <span class="lang-en">Braj Kavya Kosha</span>
</footer>

{{ $dict := index .Site.Data "dictionary" }}
{{ if $dict }}
<script>
  window.BRAJ_DICTIONARY = {{ $dict | jsonify }};
</script>
{{ end }}

<script src="/js/dictionary.js"></script>
<script src="/js/lang.js"></script>
</body>
</html>